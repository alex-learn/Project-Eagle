

Processing ReservationsController#book_reservation (for 127.0.0.1 at 2011-07-08 22:41:34) [POST]
  Parameters: {"tee_slot"=>"07:00", "date"=>"", "cause"=>"2"}
  [4;36;1mReservation Load (0.2ms)[0m   [0;1mSELECT * FROM "reservations" WHERE ("reservations"."date" = '') [0m

ArgumentError (wrong number of arguments (0 for 1)):
  app/controllers/reservations_controller.rb:19:in `initiate_twilio_call'
  app/controllers/reservations_controller.rb:19:in `book_reservation'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (119.9ms)
Rendered rescues/_request_and_response (1.3ms)
Rendering rescues/layout (internal_server_error)


Processing ReservationsController#book_reservation (for 127.0.0.1 at 2011-07-08 22:42:49) [POST]
  Parameters: {"tee_slot"=>"08:00", "date"=>"", "cause"=>"2"}
  [4;36;1mReservation Load (0.2ms)[0m   [0;1mSELECT * FROM "reservations" WHERE ("reservations"."date" = '') [0m

ActionController::DoubleRenderError (Can only render or redirect once per action):
  app/controllers/reservations_controller.rb:97:in `initiate_twilio_call'
  app/controllers/reservations_controller.rb:19:in `book_reservation'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (126.8ms)
Rendered rescues/_request_and_response (1.3ms)
Rendering rescues/layout (internal_server_error)


Processing ReservationsController#book_reservation (for 127.0.0.1 at 2011-07-08 22:44:35) [POST]
  Parameters: {"tee_slot"=>"07:00", "date"=>"", "cause"=>"2"}
  [4;35;1mReservation Load (0.2ms)[0m   [0mSELECT * FROM "reservations" WHERE ("reservations"."date" = '') [0m
Completed in 11ms (View: 1, DB: 0) | 200 OK [http://localhost/reservations/book_reservation]


Processing ReservationsController#book_reservation (for 127.0.0.1 at 2011-07-08 22:48:57) [POST]
  Parameters: {"tee_slot"=>"08:00", "date"=>Fri, 08 Jul 2011, "cause"=>"2"}
  [4;36;1mReservation Load (0.2ms)[0m   [0;1mSELECT * FROM "reservations" WHERE ("reservations"."date" = '2011-07-08') [0m
Completed in 47ms (View: 15, DB: 0) | 200 OK [http://localhost/reservations/book_reservation]


Processing ReservationsController#book_reservation (for 127.0.0.1 at 2011-07-08 22:49:27) [POST]
  Parameters: {"tee_slot"=>"08:23", "golfers"=>"", "date"=>Sat, 09 Jul 2011, "lname"=>"jayaram", "fName"=>"anush", "cause"=>"3", "email"=>"Anush@gmail.com"}
  [4;35;1mReservation Load (0.1ms)[0m   [0mSELECT * FROM "reservations" WHERE ("reservations"."tee_slot" = '08:23') AND ("reservations"."date" = '2011-07-09') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'Anush@gmail.com') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."email" = 'Anush@gmail.com') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."email" = 'Anush@gmail.com') LIMIT 1[0m
  [4;35;1mUser Create (0.3ms)[0m   [0mINSERT INTO "users" ("created_at", "updated_at", "f_name", "course_id", "email", "l_name") VALUES('2011-07-09 05:49:27', '2011-07-09 05:49:27', 'anush', NULL, 'Anush@gmail.com', NULL)[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'Anush@gmail.com') LIMIT 1[0m
  [4;35;1mReservation Create (0.2ms)[0m   [0mINSERT INTO "reservations" ("tee_slot", "created_at", "updated_at", "golfers", "date", "availability", "user_id", "course_id") VALUES('08:23', '2011-07-09 05:49:27', '2011-07-09 05:49:27', NULL, '2011-07-09', 't', 1, 1)[0m
Completed in 26ms (View: 1, DB: 1) | 200 OK [http://localhost/reservations/book_reservation]


Processing ReservationsController#book_reservation (for 127.0.0.1 at 2011-07-08 23:05:49) [POST]
  Parameters: {"tee_slot"=>"10:00", "date"=>Sat, 09 Jul 2011, "cause"=>"2"}
  [4;36;1mReservation Load (0.2ms)[0m   [0;1mSELECT * FROM "reservations" WHERE ("reservations"."date" = '2011-07-09') [0m

TypeError (nil can't be coerced into Fixnum):
  app/controllers/application_controller.rb:125:in `show_available_tee_slots_for_date'
  app/controllers/application_controller.rb:125:in `merge'
  app/controllers/application_controller.rb:125:in `show_available_tee_slots_for_date'
  app/controllers/application_controller.rb:140:in `show_available_tee_slots_for_hour'
  app/controllers/reservations_controller.rb:59:in `check_reservations'
  app/controllers/reservations_controller.rb:16:in `book_reservation'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (50.5ms)
Rendered rescues/_request_and_response (1.5ms)
Rendering rescues/layout (internal_server_error)


Processing ReservationsController#book_reservation (for 127.0.0.1 at 2011-07-08 23:07:06) [POST]
  Parameters: {"tee_slot"=>"10:00", "date"=>Sat, 09 Jul 2011, "cause"=>"2"}
  [4;35;1mReservation Load (0.2ms)[0m   [0mSELECT * FROM "reservations" WHERE ("reservations"."date" = '2011-07-09') [0m

TypeError (nil can't be coerced into Fixnum):
  app/controllers/application_controller.rb:125:in `show_available_tee_slots_for_date'
  app/controllers/application_controller.rb:125:in `merge'
  app/controllers/application_controller.rb:125:in `show_available_tee_slots_for_date'
  app/controllers/application_controller.rb:140:in `show_available_tee_slots_for_hour'
  app/controllers/reservations_controller.rb:59:in `check_reservations'
  app/controllers/reservations_controller.rb:16:in `book_reservation'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (45.3ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.5ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateCourses (20110604005139)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (1.2ms)[0m   [0mDROP TABLE "courses"[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mDELETE FROM schema_migrations WHERE version = '20110604005139'[0m
Migrating to CreateReservations (20110604005127)
  [4;35;1mSQL (0.5ms)[0m   [0mDROP TABLE "reservations"[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mDELETE FROM schema_migrations WHERE version = '20110604005127'[0m
Migrating to CreateUsers (20110604004217)
  [4;35;1mSQL (0.5ms)[0m   [0mDROP TABLE "users"[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mDELETE FROM schema_migrations WHERE version = '20110604004217'[0m
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.1ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateUsers (20110604004217)
  [4;36;1mSQL (0.1ms)[0m   [0;1mselect sqlite_version(*)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" text, "f_name" text, "l_name" text, "course_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20110604004217')[0m
Migrating to CreateReservations (20110604005127)
  [4;35;1mSQL (0.3ms)[0m   [0mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "date" date, "tee_slot" varchar(255), "availability" boolean DEFAULT 'true', "golfers" integer, "user_id" integer, "course_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20110604005127')[0m
Migrating to CreateCourses (20110604005139)
  [4;35;1mSQL (0.4ms)[0m   [0mCREATE TABLE "courses" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "price" decimal(8,2), "description" text, "contact" text, "created_at" datetime, "updated_at" datetime) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20110604005139')[0m
  [4;35;1mSQL (0.2ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (0.1ms)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mPRAGMA index_list("courses")[0m
  [4;35;1mSQL (0.0ms)[0m   [0mPRAGMA index_list("reservations")[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mPRAGMA index_list("users")[0m


Processing ReservationsController#book_reservation (for 127.0.0.1 at 2011-07-08 23:09:24) [POST]
  Parameters: {"tee_slot"=>"08:00", "date"=>Fri, 08 Jul 2011, "cause"=>"2"}
  [4;36;1mReservation Load (0.2ms)[0m   [0;1mSELECT * FROM "reservations" WHERE ("reservations"."date" = '2011-07-08') [0m
Completed in 35ms (View: 6, DB: 0) | 200 OK [http://localhost/reservations/book_reservation]


Processing ReservationsController#book_reservation (for 127.0.0.1 at 2011-07-08 23:10:18) [POST]
  Parameters: {"tee_slot"=>"08:07", "golfers"=>"", "date"=>Sat, 09 Jul 2011, "lname"=>"jayaram", "fName"=>"anush", "cause"=>"3", "email"=>"Anush@gmail.com"}
  [4;35;1mReservation Load (0.1ms)[0m   [0mSELECT * FROM "reservations" WHERE ("reservations"."tee_slot" = '08:07') AND ("reservations"."date" = '2011-07-09') LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'Anush@gmail.com') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM "users" WHERE ("users"."email" = 'Anush@gmail.com') LIMIT 1[0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT "users".id FROM "users" WHERE ("users"."email" = 'Anush@gmail.com') LIMIT 1[0m
  [4;35;1mUser Create (1.6ms)[0m   [0mINSERT INTO "users" ("created_at", "updated_at", "f_name", "course_id", "email", "l_name") VALUES('2011-07-09 06:10:18', '2011-07-09 06:10:18', 'anush', NULL, 'Anush@gmail.com', NULL)[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM "users" WHERE ("users"."email" = 'Anush@gmail.com') LIMIT 1[0m
  [4;35;1mReservation Create (0.3ms)[0m   [0mINSERT INTO "reservations" ("tee_slot", "created_at", "updated_at", "golfers", "date", "availability", "user_id", "course_id") VALUES('08:07', '2011-07-09 06:10:18', '2011-07-09 06:10:18', NULL, '2011-07-09', 't', 1, 1)[0m
Completed in 29ms (View: 1, DB: 3) | 200 OK [http://localhost/reservations/book_reservation]
